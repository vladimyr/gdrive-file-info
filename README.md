# gdrive-file-info

[![build status](https://badgen.net/travis/vladimyr/gdrive-file-info)](https://travis-ci.com/vladimyr/gdrive-file-info/) [![install size](https://badgen.net/packagephobia/install/gdrive-file-info)](https://packagephobia.now.sh/result?p=gdrive-file-info) [![npm package version](https://badgen.net/npm/v/gdrive-file-info)](https://npm.im/gdrive-file-info) [![github license](https://badgen.net/github/license/vladimyr/gdrive-file-info)](https://github.com/vladimyr/gdrive-file-info/blob/master/LICENSE) [![js semistandard style](https://badgen.net/badge/code%20style/semistandard/pink)](https://github.com/Flet/semistandard)

> Fetch file information for publicly shared Google Drive items.

## Instalation

    $ npm install gdrive-file-info

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [GDriveError](#gdriveerror)
    -   [Properties](#properties)
-   [FileInfo](#fileinfo)
    -   [Properties](#properties-1)
-   [fetchInfo](#fetchinfo)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
-   [getItemId](#getitemid)
    -   [Parameters](#parameters-1)
    -   [Examples](#examples-1)

### GDriveError

**Extends Error**

Custom error class used for wrapping HTTP errors

#### Properties

-   `reason` **[Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)** original HTTP error

### FileInfo

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### Properties

-   `disposition` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Google Drive scan status
-   `fileName` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** item filename
-   `downloadUrl` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** generated direct download url
-   `scanResult` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Google Drive scan result
-   `sizeBytes` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** file size

### fetchInfo

Fetch file info for given item id

#### Parameters

-   `input` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Google Drive item view/open url or item id

#### Examples

```javascript
// fetch public video info
const info = await fetchInfo('https://drive.google.com/open?id=1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD');
console.log(info.downloadUrl);
//=> https://doc-00-6c-docs.googleusercontent.com/docs/securesc/â€¦/1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD
```

-   Throws **[GDriveError](#gdriveerror)** throws on querying missing/private items
-   Throws **[TypeError](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypeError)** throws on invalid ID provided

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[FileInfo](#fileinfo)>** item info

### getItemId

Extract item id from Google Drive shareable link

#### Parameters

-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Google Drive item view/open url

#### Examples

```javascript
// with _open_ link
const id = getItemId('https://drive.google.com/open?id=1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD');
//=> 1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD

// with _view_ link
const id = getItemId('https://drive.google.com/file/d/1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD/view?usp=sharing');
//=> 1ObJEVgO6Y4cFjfxszUb1LhdyeKrq_wGD
```

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** item id
